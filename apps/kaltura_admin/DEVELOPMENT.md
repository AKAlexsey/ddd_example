# Как формируется представление
Поскольку представления по всем сущностям принципиально совпадают (используются одни и те же элементы, таблицы , оформление и пр.), то вся специфичная информация вынесена в объект `meta`, которые описаны в соответствующем файле `*_view.ex`

## Структура объекта `meta`
Используются следующие свойства:

**:header** - string, заголовок поля. Данное значение будет отображено в столбце таблицы при табличном отображении, либо как label при отображении в форме при просмотре или редактировании/создании;

**:type** - определяет тип данных. Доступны следующие значения:
* *hidden* - скрытое поле, используется компонента `table_form_hidden.html.eex`
* *string* - строковые данные. Отображается как обычная строка, используется компонента `table_form_string.html.eex`
* *textarea* - строковые данные. Отображается как обычная строка, используется компонента `table_form_textarea.html.eex`. Отличие от предыдущей в использовании textarea при создании и редактировании.
* *password* - пароль. Компонента: `table_form_password.html.eex`
* *status* - статус объекта, у которого доступны два состояния: активный и неактивный. Компонента: `table_form_status.html.eex`
* *boolean* - тип, принимающий два значения: true, false. Компонента: `table_form_boolean.html.eex`
* *select* - предоставление списка элементов для выбора единственнного значения. Компонента: `table_form_select.html.eex`
* *multiselect* - тип поля, описывающий коллекцию объектов. Компонента: `table_form_multiselect.html.eex`
* *select_entity* - тип поля, описывающий связь с другой сущностью, предоставляя возможность выбора единственной сущности. Компонента: `table_form_select_entity.html.eex`
* *datetime* - дата/время. Компонента: `table_form_datetime.html.eex`

**:field** - соответствующее поле объекта;

**:mode** - массив представлений, на которых должны отображаться данные. Доступны следующие значения:
* `:table` - табличное представление;
* `:show` - форма просмотра данных;
* `:edit` - форма редактирования;
* `:create` - форма создания;

**:eval_fn** - функция, предназначаенная для рендеринга значения. В качестве аргумента используется объект. На выходе - сформированное значение, характеризующее упомянутый в header параметр.

**:eval_html_fn** - тоже, что и evalFn, но может включать в себя HTML-верстку, а при выводе значения используется функция `raw`

**:items** - включает в себя коллекцию объектов для выбора, которая используется в компонентах `select`, `multiselect`, `select_entity`

**:checkbox_name** - название формы input checkbox элементов. Используется для компоненты `multiselect` (поскольку множественный выбор реализован через группу checkbox элементов). Значение может принимать примерно следующий вид: *server[server_group_ids][]*

**:selected_item_ids** - массив идентификаторов выбранных объектов

**:item_name_eval_fn** - функция для вычисления именования сущности. Используется в компонентах multiselect для вычисления наименования элементов коллекции. На входе - сущность. На выходе - строка. Например:
```
fn item -> item.name <> " (" <> to_string(item.id) <> ")"
```
